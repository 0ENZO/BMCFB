{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}
{% block navbar %} 
    <div class="d-none d-md-block">{{ parent() }}</div>
{% endblock %}
{% block body %}

<div id="register_content" class="container px-0 p-md-3 full_page_container">

    {% if app.user %}
        <div class="mb-3">
            <div class="container-fluid">
                <div class="alert alert-dismissible fade show alert-info mt-3">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    Vous êtes déja connecté avec l'adresse : {{ app.user.username }} | <a
                        href="{{ path('app_logout') }}">Se
                        déconnecter</a>
                </div>
            </div>
        </div>
    {% endif %}

    <div class="d-md-none d-block">
        <div class="d-flex col-1 circular-shape bg-transparent-blue align-items-center justify-content-center position-relative">
            <a class="" href="{{ path('app_login') }}"><i class="fas fa-arrow-left light-purple font_size_1250"></i></a>
        </div>
    
        <div class="col-10 mx-auto authenticationContent">
            <img class="d-flex text-center mx-auto mb-2" src="{{ asset('/img/welcome.svg')}}" alt="">
            <h4 class="text-center mb-3">Bienvenue !</h4>
    
            <div class="mt-3 mx-auto">
                {% set registrationForm =  form.createView %}
                {{ form_start(registrationForm) }}

                    {% if form_errors(registrationForm) %}
                        <div class="mb-0">{{ form_errors(registrationForm) }}</div>
                    {% endif %}

                    {% if app.user %}
                        <div class="mb-3">
                            <div class="container-fluid">
                                <div class="alert alert-dismissible fade show alert-info mt-3">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    Vous êtes déja connecté avec l'adresse : {{ app.user.username }} | <a
                                        href="{{ path('app_logout') }}">Se
                                        déconnecter</a>
                                </div>
                            </div>
                        </div>
                    {% endif %}

                    <div class="mb-3">
                        {{ form_widget(registrationForm.email, { 'attr': { 'placeholder': 'Email' } }) }}
                    </div>

                    <div class="mb-3">
                        {{ form_widget(registrationForm.plainPassword, { 'attr': { 'placeholder': 'Mot de passe' } }) }}
                    </div>
                    
                    {#
                    <div class="mb-3">
                        {{ form_widget(registrationForm.agreeTerms) }}
                    </div>
                    #}

                    <div class="col-12 mt-4 p-0 mx-auto">
                        <button class="btn bg-medium-purple text-white text-center font-weight-bold w-100" type="submit">Inscription</button>
                    </div>

                {{ form_end(registrationForm) }}
            </div>
        </div>
    </div>

    <div class="d-none d-md-flex row justify-content-between align-items-center mt-5 py-2" style="flex-grow: 1;"> 
        <div class="col-md-6 mt-3" style="position: relative;">
            <div style="position: absolute;">
                <h1 class="text-left mb-3">Inscrivez-vous et évaluez vos façons de faire</h1>
                <h5 class="text-left mt-5 fw_300" style="overflow-wrap: break-word;">Si vous avez déjà un compte, vous pouvez 
                    vous <a href="{{ path('app_login') }}" style="color: #476ff5!important;">connectez ici !</a>
                </h5>
            </div>

            <img src="{{ asset('/img/sign_in.svg')}}" alt="" style="max-width: 750px; margin-top: 17.5%;">
        </div>
        <div class="col-md-4 mt-5">
            <h4 class="text-left mb-4 font-weight-bold">Bienvenue !</h1>
            <form method="post">
    
                {% if app.user %}
                <div class="mb-3">
                    <div class="container-fluid">
                        <div class="alert alert-dismissible fade show alert-info mt-3">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            Vous êtes déja connecté avec l'adresse : {{ app.user.username }} | <a
                                href="{{ path('app_logout') }}">Se
                                déconnecter</a>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% set registrationForm =  form.createView %}
                {{ form_start(registrationForm) }}

                {% if form_errors(registrationForm) %}
                    <div class="mb-0">{{ form_errors(registrationForm) }}</div>
                {% endif %}

                {% if app.user %}
                    <div class="mb-3">
                        <div class="container-fluid">
                            <div class="alert alert-dismissible fade show alert-info mt-3">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                Vous êtes déja connecté avec l'adresse : {{ app.user.username }} | <a
                                    href="{{ path('app_logout') }}">Se
                                    déconnecter</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <div class="mb-3">
                    {{ form_widget(registrationForm.email, { 'attr': { 'placeholder': 'Email' } }) }}
                </div>

                <div class="mb-3">
                    {{ form_widget(registrationForm.plainPassword, { 'attr': { 'placeholder': 'Mot de passe' } }) }}
                </div>
                
                {#
                <div class="mb-3">
                    {{ form_widget(registrationForm.agreeTerms) }}
                </div>
                #}
    
                <div class="text-center">
                    <button class="btn bg-medium-blue mt-4 text-white text-center font-weight-bold w-100" style="border-radius: 10px!important; min-height: 42px;" type="submit">Inscription</button>
                </div>
            {{ form_end(registrationForm) }}
    
            </form>
        </div>
    </div>
</div>

{% endblock %}
